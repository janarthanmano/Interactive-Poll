{"version":3,"file":"interactive-poll/view.js","mappings":"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","sources":["webpack://interactive-poll/./node_modules/react-dom/client.js","webpack://interactive-poll/./src/interactive-poll/error-boundary.js","webpack://interactive-poll/./src/interactive-poll/style.scss","webpack://interactive-poll/./src/interactive-poll/view.js","webpack://interactive-poll/external window [\"wp\",\"apiFetch\"]","webpack://interactive-poll/external window [\"wp\",\"element\"]","webpack://interactive-poll/external window [\"wp\",\"i18n\"]","webpack://interactive-poll/external window \"ReactDOM\"","webpack://interactive-poll/external window \"ReactJSXRuntime\"","webpack://interactive-poll/webpack/bootstrap","webpack://interactive-poll/webpack/runtime/chunk loaded","webpack://interactive-poll/webpack/runtime/compat get default export","webpack://interactive-poll/webpack/runtime/define property getters","webpack://interactive-poll/webpack/runtime/hasOwnProperty shorthand","webpack://interactive-poll/webpack/runtime/make namespace object","webpack://interactive-poll/webpack/runtime/jsonp chunk loading","webpack://interactive-poll/webpack/before-startup","webpack://interactive-poll/webpack/startup","webpack://interactive-poll/webpack/after-startup"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import { Component } from '@wordpress/element';\n\nexport class ErrorBoundary extends Component {\n\tstate = { hasError: false };\n\n\tstatic getDerivedStateFromError() {\n\t\treturn { hasError: true };\n\t}\n\n\tcomponentDidCatch(error, info) {\n\t\tconsole.error('Poll Error:', error, info);\n\t}\n\n\trender() {\n\t\tif (this.state.hasError) {\n\t\t\treturn (\n\t\t\t\t<div className=\"poll-error\">\n\t\t\t\t\tFailed to load poll. Please refresh the page.\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn this.props.children;\n\t}\n}\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\nimport { __ } from '@wordpress/i18n';\nimport { createRoot } from 'react-dom/client';\nimport { useState, useEffect, useCallback } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { ErrorBoundary } from './error-boundary';\nimport './style.scss';\nconst PollFrontend = ({ attributes, postId }) => {\n\tconst { question, options, pollId, expiration } = attributes;\n\tconst [hasVoted, setHasVoted] = useState(false);\n\tconst [votes, setVotes] = useState(() =>\n\t\tnew Array(attributes.options?.length || 0).fill(0)\n\t);\n\tconst [ isLoading, setIsLoading] = useState(false);\n\tconst [ isExpired, setIsExpired] = useState(false);\n\n\t//Check if the results should be displayed if the user has voted or the poll has expired.\n\tconst showResults = hasVoted || isExpired;\n\n\tconst fetchResults = useCallback(async () => {\n\t\t//create a unique key for the poll to store the results locally.\n\t\tconst cacheKey = `poll_${postId}_${pollId}_results`;\n\n\t\t//store results in local storage for 1 min\n\t\tconst CACHE_DURATION = 60 * 1000;\n\n\t\ttry {\n\t\t\t//checking if the data exists in local\n\t\t\tconst cached = sessionStorage.getItem(cacheKey);\n\t\t\tif (cached) {\n\t\t\t\tconst { timestamp, data } = JSON.parse(cached);\n\t\t\t\tif (Date.now() - timestamp < CACHE_DURATION) {\n\t\t\t\t\tsetVotes(data);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//if no local storage or data expired then fetch from server\n\t\t\tsetIsLoading(true);\n\n\t\t\tconst response = await apiFetch({\n\t\t\t\tpath: `/interactive-poll/v1/results?post_id=${postId}&poll_id=${pollId}`\n\t\t\t});\n\n\t\t\t//validating the response\n\t\t\tif (!response || typeof response.votes !== 'object' || response.votes === null) {\n\t\t\t\tthrow new Error('Invalid API response format');\n\t\t\t}\n\n\t\t\t//response object to array\n\t\t\tconst votesArray = new Array(options.length).fill(0);\n\t\t\tObject.entries(response.votes).forEach(([key, value]) => {\n\t\t\t\tconst index = parseInt(key, 10);\n\t\t\t\tif (!isNaN(index) && index >= 0 && index < options.length) {\n\t\t\t\t\tvotesArray[index] = Math.max(0, Number(value));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Update state and cache\n\t\t\tsetVotes(votesArray);\n\t\t\tsessionStorage.setItem(cacheKey, JSON.stringify({\n\t\t\t\ttimestamp: Date.now(),\n\t\t\t\tdata: votesArray\n\t\t\t}));\n\n\t\t} catch (error) {\n\t\t\tconsole.error('Fetch results failed:', error);\n\t\t\t// Fallback to empty array matching options length\n\t\t\tconst fallbackVotes = new Array(options.length).fill(0);\n\t\t\tsetVotes(fallbackVotes);\n\t\t\tsessionStorage.removeItem(cacheKey);\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t}, [postId, pollId, options.length]);\n\n\tuseEffect(() => {\n\t\tconst checkVoteStatus = () => {\n\t\t\t//Setting cookie to find out if the user voted a poll to display only results.\n\t\t\tconst cookie = document.cookie.match(`(^|;) ?interactive_poll_${pollId}=([^;]*)(;|$)`);\n\t\t\tif (cookie) {\n\t\t\t\tsetHasVoted(true);\n\t\t\t\tfetchResults();\n\t\t\t}\n\t\t};\n\n\t\tcheckVoteStatus();\n\n\t\tconst cacheKey = `poll_${postId}_${pollId}_results`;\n\t\tsessionStorage.removeItem(cacheKey);\n\n\t\treturn () => {\n\t\t\tsetIsLoading(false);\n\t\t\tsetVotes([]);\n\t\t};\n\t}, [pollId, fetchResults, postId]);\n\n\t//Check if the poll has expired and fetch the final result to display\n\tuseEffect(() => {\n\t\tconst checkExpiration = () => {\n\t\t\tif (!expiration) return;\n\n\t\t\tconst now = Date.now();\n\t\t\tconst expirationDate = new Date(expiration).getTime();\n\t\t\tconst timeLeft = expirationDate - now;\n\n\t\t\tif (timeLeft <= 0) {\n\t\t\t\tsetIsExpired(true);\n\t\t\t\tfetchResults()\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//Setting a timout to timeleft for the poll to expire, so a fetch is done at the end of the poll time.\n\t\t\tconst timeout = setTimeout(() => {\n\t\t\t\tsetIsExpired(true);\n\t\t\t\tfetchResults();\n\t\t\t}, timeLeft);\n\n\t\t\treturn () => clearTimeout(timeout);\n\t\t};\n\n\t\tcheckExpiration();\n\t}, [expiration, fetchResults]);\n\n\tconst handleVote = async (index) => {\n\n\t\t//don't need to handle is the poll has expired.\n\t\tif (isExpired) return;\n\n\t\tif (\n\t\t\tisLoading ||\n\t\t\thasVoted ||\n\t\t\ttypeof index !== 'number' ||\n\t\t\tindex < 0 ||\n\t\t\tindex >= options.length\n\t\t) return;\n\n\t\ttry {\n\t\t\tsetIsLoading(true);\n\n\t\t\t//clearing cached result so fresh result is fetched as soon as the user vote\n\t\t\tconst cacheKey = `poll_${postId}_${pollId}_results`;\n\t\t\tsessionStorage.removeItem(cacheKey);\n\n\t\t\t//post request to custom API route to register the vote\n\t\t\tawait apiFetch({\n\t\t\t\tpath: '/interactive-poll/v1/vote',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tpost_id: postId,\n\t\t\t\t\tpoll_id: pollId,\n\t\t\t\t\toption_index: index\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//creating cookie to find if the user voted and saving the index to display the option voted by user\n\t\t\tdocument.cookie = `interactive_poll_${pollId}=${index}; max-age=2592000; path=/`;\n\n\t\t\tawait fetchResults();\n\t\t\tsetHasVoted(true);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error submitting vote:', error);\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t};\n\n\t//Loading animation\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<div className=\"poll-loading\">\n\t\t\t\t<div className=\"spinner\"></div>\n\t\t\t\t<p>Loading poll results...</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst totalVotes = Array.isArray(votes)\n\t\t? votes.reduce((sum, count) => sum + (Number.isInteger(count) ? count : 0), 0)\n\t\t: 0;\n\n\treturn (\n\t\t<div className={`interactive-poll ${isExpired ? 'poll-expired' : ''}`}>\n\t\t\t{expiration && (\n\t\t\t\t<div className=\"poll-expiration\">\n\t\t\t\t\t{isExpired ? (\n\t\t\t\t\t\t<span>Poll closed • Final results</span>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span>\n              Voting open until: {new Date(expiration).toLocaleString()}\n            </span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<h3>{ question || __(\"Poll Question\", \"interactive-poll\") }</h3>\n\n\t\t\t{!showResults ? (\n\t\t\t\t<div className=\"poll-options\">\n\t\t\t\t\t{options.map((option, index) => (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={() => handleVote(index)}\n\t\t\t\t\t\t\tdisabled={hasVoted || isLoading}\n\t\t\t\t\t\t\taria-label={`Vote for option ${option.text}`}\n\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{option.imageUrl ? (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<img src={option.imageUrl} alt={option.text}/>\n\t\t\t\t\t\t\t\t\t<span>{option.text}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<span>{option.text}</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"poll-results\">\n\t\t\t\t\t\t{options.map((option, index) => {\n\t\t\t\t\t\t\tconst count = Array.isArray(votes) && votes[index] ? votes[index] : 0;\n\t\t\t\t\t\t\tconst percentage = totalVotes > 0 ? Math.round((count / totalVotes) * 100) : 0;\n\t\t\t\t\t\t\t// Get voted index from cookie\n\t\t\t\t\t\t\tconst votedIndex = document.cookie.match(`interactive_poll_${pollId}=(\\\\d+)`)?.[1];\n\n\t\t\t\t\t\t\t//console.log('votedIndex', votedIndex);\n\t\t\t\t\t\t\t//console.log('index', index);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={index}\n\t\t\t\t\t\t\t\t\t className=\"result-item\">\n\t\t\t\t\t\t\t\t\t<div className={`result-label ${index === parseInt(votedIndex) ? 'voted-option' : ''}`}>\n\t\t\t\t\t\t\t\t\t\t{option.imageUrl ? (\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={option.imageUrl} alt={option.text}/>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{option.text}</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<span>{option.text}</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"result-bar\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"result-percentage\">{percentage}%</span>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"result-progress\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{width: `${percentage}%`}}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"total-votes\"><p>Total Votes: {totalVotes}</p></div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\ndocument.querySelectorAll('.wp-block-custom-interactive-poll').forEach(container => {\n\tconst attributes = JSON.parse(container.dataset.attributes);\n\tconst postId = parseInt(container.dataset.postId);\n\n\tcreateRoot(container).render(\n\t\t<ErrorBoundary>\n\t\t\t<PollFrontend\n\t\t\t\tattributes={attributes}\n\t\t\t\tpostId={postId}\n\t\t\t/>\n\t\t</ErrorBoundary>\n\t);\n});\n","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"ReactDOM\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"interactive-poll/view\": 0,\n\t\"interactive-poll/style-view\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkinteractive_poll\"] = globalThis[\"webpackChunkinteractive_poll\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"interactive-poll/style-view\"], () => (__webpack_require__(\"./src/interactive-poll/view.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["Component","jsx","_jsx","ErrorBoundary","state","hasError","getDerivedStateFromError","componentDidCatch","error","info","console","render","className","children","props","__","createRoot","useState","useEffect","useCallback","apiFetch","jsxs","_jsxs","PollFrontend","attributes","postId","question","options","pollId","expiration","hasVoted","setHasVoted","votes","setVotes","Array","length","fill","isLoading","setIsLoading","isExpired","setIsExpired","showResults","fetchResults","cacheKey","CACHE_DURATION","cached","sessionStorage","getItem","timestamp","data","JSON","parse","Date","now","response","path","Error","votesArray","Object","entries","forEach","key","value","index","parseInt","isNaN","Math","max","Number","setItem","stringify","fallbackVotes","removeItem","checkVoteStatus","cookie","document","match","checkExpiration","expirationDate","getTime","timeLeft","timeout","setTimeout","clearTimeout","handleVote","method","post_id","poll_id","option_index","totalVotes","isArray","reduce","sum","count","isInteger","toLocaleString","map","option","onClick","disabled","text","role","imageUrl","src","alt","percentage","round","votedIndex","style","width","querySelectorAll","container","dataset"],"sourceRoot":""}